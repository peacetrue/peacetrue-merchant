= 设计文档

== 数据结构

.属性
* 商家名，唯一
* 密码
* 创建者
* 创建时间
* 最近修改者
* 最近修改时间

== 服务者功能

初始化一个管理员商家，由它创建其他商家。

=== 登陆

登陆系统，使用商家名和密码认证。

=== 创建商家

管理员创建其他商家，分配给需要的人使用。 需要检查商家名是否重复。

=== 查询商家

查询商家信息。过滤敏感密码信息。

* 分页查询：按每页查询记录
* 全量查询：按条数查询记录

=== 查看商家

查看商家信息。过滤敏感密码信息。

=== 修改商家

当前没有可以修改的商家基本信息。

=== 修改密码

商家修改自己的密码。

=== 忘记密码

线下找管理员重置密码。

=== 重置密码

管理员重置其他商家的密码。

NOTE: 管理员自己的密码忘了，怎么办？修改数据库。

=== 删除商家

删除商家信息。

* 标记删除：标记为删除。
* 逻辑删除：屏蔽商家相关信息。因为已经产生的历史信息无法完全抹去，假设商家购买了商品，就算删除了订单信息但支付信息却不能删除，否则对账不平。
* 物理删除：删除实际存储的信息，回滚商家的所有操作，仿佛其从未存在。只在测试环境使用。

NOTE: 工信部要求商家注销要物理删除，然而做不到物理删除，实际使用逻辑删除。

逻辑删除的实现思路：

将当前商家产生的所有记录分配给一个已注销的占位商家。如果是 1 对 1 的关联信息，关联多条会异常，所以 1 对 1 的关联信息都需要使用占位信息，比如，商家关联的商家信息。

== 商家功能

继承服务者功能，当从商家端操作失败时，可以实现从服务端操作。不用初始化管理员商家。

=== 注册

注册商家，使用商家名、密码注册。

=== 登陆

登陆系统，使用商家名、密码认证。

=== 查看个人信息

查看自己的商家信息。

=== 修改密码

修改自己的密码，需要认证原密码。

=== 忘记密码

忘记密码，提供商家名申请服务者核实后重置。

=== 注销

注销商家。



